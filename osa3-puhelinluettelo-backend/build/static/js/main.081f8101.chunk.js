(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{37:function(e,n,t){},38:function(e,n,t){"use strict";t.r(n);var c=t(0),a=t(1),r=t.n(a),i=t(14),u=t.n(i),o=t(3),s=function(e){return Object(c.jsxs)("div",{children:[e.person.name," ",e.person.number,Object(c.jsx)("button",{onClick:e.handleDelete,children:"delete"})]})},l=function(e){return Object(c.jsx)("form",{onSubmit:e.addPerson,children:Object(c.jsxs)("div",{children:[Object(c.jsx)("h2",{children:"Add a new"}),Object(c.jsxs)("div",{children:["name:",Object(c.jsx)("input",{value:e.newName,onChange:e.handleNameChange})]}),Object(c.jsxs)("div",{children:["number:",Object(c.jsx)("input",{value:e.newNumber,onChange:e.handleNumberChange})]}),Object(c.jsx)("button",{type:"submit",children:"add"})]})})},d=function(e){return Object(c.jsxs)("div",{children:["filter shown with",Object(c.jsx)("input",{onChange:e.handleFilterChange,value:e.nameFilter})]})},h=t(4),j=t.n(h),b="http://localhost:3001/api/persons",m=function(){return j.a.get(b).then((function(e){return e.data}))},f=function(e){return j.a.post(b,e).then((function(e){return e.data}))},O=function(e,n){return j.a.put("".concat(b,"/").concat(e),n).then((function(e){return e.data}))},p=function(e){return j.a.delete("".concat(b,"/").concat(e)).then((function(e){return e.data}))},v=function(e){var n=e.message,t=e.messageType;return null===n?null:"SUCCESS"===t?Object(c.jsx)("div",{className:"success",children:n}):"ERROR"===t?Object(c.jsx)("div",{className:"error",children:n}):Object(c.jsx)("div",{className:"error",children:"Something wen't wrong with the message."})},x=function(){var e=Object(a.useState)([]),n=Object(o.a)(e,2),t=n[0],r=n[1],i=Object(a.useState)(""),u=Object(o.a)(i,2),h=u[0],j=u[1],b=Object(a.useState)(""),x=Object(o.a)(b,2),g=x[0],S=x[1],w=Object(a.useState)(""),C=Object(o.a)(w,2),N=C[0],R=C[1],E=Object(a.useState)(null),T=Object(o.a)(E,2),y=T[0],k=T[1],U=Object(a.useState)(""),D=Object(o.a)(U,2),F=D[0],P=D[1];Object(a.useEffect)((function(){m().then((function(e){r(e)}))}),[]);var A=t.filter((function(e){return e.name.toLowerCase().includes(N.toLowerCase())})),J=function(e){window.confirm("Delete ".concat(e.name,"?"))&&(p(e.id),r(t.filter((function(n){return n.id!==e.id})))),k("Removed ".concat(e.name)),P("SUCCESS"),setTimeout((function(){k(null)}),5e3)};return Object(c.jsxs)("div",{children:[Object(c.jsx)("h2",{children:"Phonebook"}),Object(c.jsx)(v,{message:y,messageType:F}),Object(c.jsx)(d,{handleFilterChange:function(e){R(e.target.value)},nameFilter:N}),Object(c.jsx)(l,{newName:h,newNumber:g,handleNameChange:function(e){j(e.target.value)},handleNumberChange:function(e){S(e.target.value)},addPerson:function(e){if(e.preventDefault(),t.find((function(e){return e.name===h}))){if(window.confirm("".concat(h," is already added to the phonebook, replace the old number with a new one?"))){var n=t.find((function(e){return e.name===h})).id,c={id:n,name:h,number:g};O(n,c).then((function(e){r(t.map((function(t){return t.id!==n?t:e})))})).catch((function(e){k("The person ".concat(c.name," was already deleted from the Server")),P("ERROR"),setTimeout((function(){k(null)}),5e3),r(t.filter((function(e){return e.id!==n})))})),k("Updated ".concat(c.name)),P("SUCCESS"),setTimeout((function(){k(null)}),5e3)}}else{var a={name:h,number:g};f(a).then((function(e){r(t.concat(e)),j(""),S(""),k("Added ".concat(a.name)),P("SUCCESS"),setTimeout((function(){k(null)}),5e3)})).catch((function(e){k("Name or number missing"),P("ERROR"),setTimeout((function(){k(null)}),5e3)}))}}}),Object(c.jsx)("h2",{children:"Numbers"}),A.map((function(e){return Object(c.jsx)(s,{person:e,handleDelete:J.bind(void 0,e)},e.name)}))]})};t(37);u.a.render(Object(c.jsx)(r.a.StrictMode,{children:Object(c.jsx)(x,{})}),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.081f8101.chunk.js.map